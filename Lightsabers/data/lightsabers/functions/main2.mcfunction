tag @e[nbt={OnGround:1b,Item:{id:"minecraft:iron_ingot",Count:4b}}] add craft1
tag @e[nbt={OnGround:1b,Item:{id:"minecraft:crafting_table",Count:1b}}] add craft2
execute at @e[tag=craft1] as @e[tag=craft2,distance=..1] run function lightsabers:set
execute at @e[tag=craft1] as @e[tag=craft2,distance=..1] run summon item ~ ~1.5 ~ {Glowing:1b,Item:{id:"minecraft:written_book",Count:1b,tag:{title:"Lightsaber Forging Guide",author:"MarcJa420",generation:0,resolved:1b,pages:['{"text":"So you managed to get the Lightsaber Forge! Impressive!  This Book contains all you need to know to get your first Lightsaber."}','{"text":"First of all, you need to get amethyst shards from geodes. You can power these in the Lightsaber Forge with various dyes (black, blue, green, orange, purple, red, white, yellow) to Crystals."}','{"text":"Next, you need to get some Iron and Netherite, 8 Iron Ingots and 1 Netherite Ingot, to be exact.  Put the Netherite Ingot in the center slot of the Lightsaber Forge, and the Iron Ingots around it, leaving a hole in the top slot."}','{"text":"Finally, to get your Lightsaber, just put the Handle together with a Crystal in the Lightsaber Forge!  The Lightsabers come with Fire Aspect I, as they are veeeeeeery hot! You get a bit faster too, as using the force sharpens your body and mind."}']}}}
execute at @e[tag=craft1] as @e[tag=craft2,distance=..1] run particle minecraft:happy_villager ~ ~.4 ~ .2 .2 .2 0 15
execute at @e[tag=lightsabersTable] run kill @e[tag=craft1,distance=..1]
execute at @e[tag=lightsabersTable] run kill @e[tag=craft2,distance=..1]